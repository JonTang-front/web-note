## Http报文
#### 特点
1. 无连接：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间；
2. 无状态：无状态是指协议对于事务处理没有记忆能力；
3. 灵活：HTTP允许传输任意类型的数据对象，设置请求头的Content-Type字段；


## Http请求

#### 请求报文
- 请求行：请求方法（get，post，put，delete等）、请求的url、http协议及版本；
- 请求头：Content-Type，Cookie，Cache-Control，Referer等；
- 空行：服务器解析请求头的时候，遇到空行，会认为后面的是请求体，也就是说空行是请求头和请求体之间的分割线；
- 请求体：数据部分

#### 响应报文
- 状态行：http协议及版本、状态码及状态描述；
- 响应头：服务器名称和版本号，服务器返回数据格式等；
- 空行：与请求报文的空行一样；
- 响应体：服务器返回的数据

http方法包括以下几个：
- GET：获取资源；
- POST：传输资源；
- PUT：更新资源；
- DELETE：删除资源；
- HEAD：获得报文首部

实际开发中常用的是GET和POST，这里重点介绍两者的区别：
1. GET的参数是直接暴露在url上的，相对不安全；而POST是放在请求体中的；
2. GET请求的参数的长度有限制，一般为2kB；而POST可以认为是无限制的；
3. GET请求会被浏览器主动缓存；而POST不会；
4. 浏览器在回退时，GET不会重新请求，但是POST会重新请求；
5. GET请求的参数，会被保留在浏览器的历史记录里，容易被CSRF攻击；而POST请求的参数不会被记录

## Restful
restful并不是什么具体技术，而是一套web架构约束条件和原则。架构符合REST的约束条件和原则，我们就称它为RESTful架构。主要对web设计中的以下几个方面进行了约束：
#### URL 设计
1. URL中避免出现动词（get，post等）；
2. 避免多级URL；

#### 状态码
状态码必须精确，常见状态码如下：
```
1xx：相关信息
2xx：操作成功
3xx：重定向
4xx：客户端错误
5xx：服务器错误


200：请求成功；
301：永久重定向；
302：临时重定向；
304：缓存重定向；
305：请求的资源必须通过proxy代理访问；
400：Bad Request；
401：请求需要身份验证；
403：服务器拒绝执行此请求；
404：Not Found；
500：服务端内部错误；
504：Time-out请求超时；
505：http协议版本不支持；
```
#### 服务器回应
1. 不要返回纯本文，而应该返回json数据结构；
2. 发生错误时，不要返回 200 状态码
## 网络安全
#### 跨站请求伪造（CSRF：Cross-Site Request Forgery）
攻击原理：
1. 用户登录账号，服务器返回Cookie，一般存在浏览器的localStorage中；
2. 用户未退出登录的情况下，访问危险网站，此时危险网站会获取本地存储的Cookie进行接口调用请求

防御措施：
1. Token 验证：用户登录成功后，服务端返回一个Token给用户，以后用户所有的请求都必须带上这个Token，服务端对Token进行验证；
2. Referer 验证：设置http请求头中的referer。只接受本站的请求，服务器才做响应

#### 跨域脚本攻击（XSS：Ross Site Scripting）
攻击原理：不需要你做任何的登录认证，向你的页面注入脚本（可能是js、hmtl代码块等），最终导致页面结构被破坏、插入广告、Cookie被盗用等问题。
攻击方式：
1. 反射型：XSS代码出现在url中，作为输入提交到服务器端，服务器端解析后响应，XSS代码随响应内容一起传回给浏览器，最后浏览器解析执行XSS代码；
2. 存储型：与反射型不同的是，提交的代码会存储在服务器端，下次请求时目标页面时不用再提交XSS代码

防御措施：
1. 对用户输入的数据进行编码（Encode）；
2. 首先是encode，如果是富文本，就白名单

==注：CSRF必须用户先登录，而XSS不需要；CSRF是由于网站本身的漏洞引起的，XSS是向网站注入XSS js代码，破坏网站结构==
